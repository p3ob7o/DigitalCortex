# F05.6: Morning Brief — Reminders Integration

## Overview

| Attribute | Value |
|-----------|-------|
| Feature ID | F05.6 |
| Parent | F05 (Morning Brief) |
| Priority | Phase 3 (Rituals) |
| Dependencies | F10 (External Sources) |

## Purpose

Pull reminders and shopping list items from Apple Reminders to surface time-sensitive quick actions. Unlike Linear tasks, reminders are lightweight triggers that don't require deep work.

---

## Requirements

| ID | Requirement | Priority |
|----|-------------|----------|
| F05.6.1 | Pull reminders due today | Must |
| F05.6.2 | Pull overdue reminders | Must |
| F05.6.3 | Pull reminders due in next 3 days | Must |
| F05.6.4 | Separate Shopping list from general Reminders | Must |
| F05.6.5 | Show due time if set | Must |
| F05.6.6 | Create reminders on request | Must |
| F05.6.7 | Support location-based reminders | Should |

---

## Access Method

| Setting | Value |
|---------|-------|
| Method | CLI / osascript |
| Platform | macOS (native Reminders app) |
| Auth | System permissions |

Apple Reminders is accessed via osascript (AppleScript) or the `reminders` CLI tool.

---

## Query Commands

### List Reminders

```bash
# Using osascript
osascript -e '
tell application "Reminders"
    set output to ""
    repeat with r in (reminders of list "Reminders" whose completed is false)
        set output to output & name of r & "|" & due date of r & "\n"
    end repeat
    return output
end tell
'
```

### List Shopping

```bash
osascript -e '
tell application "Reminders"
    set output to ""
    repeat with r in (reminders of list "Shopping" whose completed is false)
        set output to output & name of r & "\n"
    end repeat
    return output
end tell
'
```

---

## Data Retrieved

```json
{
  "reminders": [
    {
      "id": "reminder-123",
      "list": "Reminders",
      "title": "Call dentist",
      "due_date": "2025-01-31T10:00:00",
      "has_time": true,
      "completed": false,
      "priority": 0,
      "notes": "Reschedule annual checkup"
    },
    {
      "id": "reminder-456",
      "list": "Reminders",
      "title": "Check deployment status",
      "due_date": "2025-01-31",
      "has_time": false,
      "completed": false
    },
    {
      "id": "reminder-789",
      "list": "Reminders",
      "title": "Reply to insurance email",
      "due_date": "2025-01-30",
      "has_time": false,
      "completed": false,
      "overdue": true
    }
  ],
  "shopping": [
    {
      "id": "shop-001",
      "list": "Shopping",
      "title": "Milk",
      "completed": false
    },
    {
      "id": "shop-002",
      "list": "Shopping",
      "title": "Bread",
      "completed": false
    }
  ]
}
```

---

## Processing Logic

### 1. Categorize Reminders

| Category | Criteria | Display |
|----------|----------|---------|
| Overdue | due_date < today | ⚠ Red highlight |
| Due Today (with time) | due_date == today AND has_time | Show time |
| Due Today (no time) | due_date == today AND !has_time | Show "Today" |
| Upcoming | due_date within 3 days | Show day |

### 2. Sort Order

1. Overdue (oldest first)
2. Due today with time (earliest first)
3. Due today without time
4. Upcoming (soonest first)

### 3. Separate Lists

Reminders and Shopping are shown separately:

```
Reminders:
  ⚠ Reply to insurance email (overdue)
  • Call dentist @ 10:00
  • Check deployment status (today)

Shopping:
  • Milk
  • Bread
```

---

## Output Format

### In Daily Note

Combined with Linear tasks:

```markdown
### Tasks & Reminders

**Due Today (Linear)**
- [ ] Send revised pricing (DOMAIN-456)

**Reminders**
- ⚠ Reply to insurance email (overdue)
- Call dentist @ 10:00
- Check deployment status

**Upcoming (3 days)**
- Pay rent (Feb 1)
- Submit expense report (Feb 2)

**Shopping**
- Milk
- Bread
- Eggs
```

### In Terminal (Interactive)

```
REMINDERS

⚠ Overdue:
  • Reply to insurance email (due yesterday)
    
    [c] Mark complete
    [m] Move to today
    [d] Delete

Due today:
  • Call dentist @ 10:00
  • Check deployment status
  
Upcoming:
  • Pay rent (Feb 1)
  • Submit expense report (Feb 2)

SHOPPING (3 items)
  • Milk
  • Bread
  • Eggs
  
  [v] View full list
  [s] Skip
```

---

## Time-Based Reminders

When a reminder has a specific time:

```markdown
- Call dentist @ 10:00
```

This is shown with the time and can influence priority suggestions:

```
You have a reminder to "Call dentist" at 10:00.
Your standup starts at 10:00.

Suggestion: Call before standup (09:45) or reschedule?
  [b] Add buffer: call at 09:45
  [r] Reschedule to afternoon
  [k] Keep as-is
```

---

## Shopping List Handling

Shopping list is treated differently:
- No due dates (always "when shopping")
- Grouped together
- Not mixed with reminders in priorities

```markdown
**Shopping List** (3 items)
- Milk
- Bread
- Eggs

Going to the store? Here's your list.
```

---

## Write Capabilities

Claude can create reminders:

### General Reminder

```
/reminder Call dentist tomorrow at 10am

Creating reminder:
  List: Reminders
  Title: Call dentist
  Due: 2025-02-01 10:00
  
  [c] Create
  [e] Edit
```

### Shopping Item

```
/shopping milk, bread, eggs

Adding to Shopping:
  • Milk
  • Bread
  • Eggs
  
  [c] Create all
  [e] Edit
```

### osascript Commands

```bash
# Create reminder with due date
osascript -e '
tell application "Reminders"
    make new reminder in list "Reminders" with properties {name:"Call dentist", due date:date "2025-02-01 10:00:00"}
end tell
'

# Create shopping item (no due date)
osascript -e '
tell application "Reminders"
    make new reminder in list "Shopping" with properties {name:"Milk"}
end tell
'
```

---

## Location-Based Reminders

Apple Reminders supports location triggers. If present:

```json
{
  "title": "Buy groceries",
  "location": {
    "name": "Whole Foods",
    "arriving": true
  }
}
```

Display in brief:

```markdown
- Buy groceries (when arriving at Whole Foods)
```

Creating location reminders via osascript is complex; this is a "Should" requirement.

---

## Failure Handling

| Failure | Behavior |
|---------|----------|
| osascript fails | Retry, then skip with warning |
| List not found | Warn, create list, or skip |
| Permissions denied | Prompt for system permissions |
| No reminders | Show "No reminders due" |

```
⚠ Reminders: Permission denied
  Grant access in System Preferences > Privacy > Reminders
```

---

## Configuration

```yaml
sources:
  reminders:
    enabled: true
    lists:
      - Reminders
      - Shopping
    upcoming_days: 3          # How far ahead to show
    show_completed: false     # Include completed items?
```

---

## Task vs. Reminder Distinction

Brief distinguishes between Linear tasks and Reminders:

| Linear Tasks | Apple Reminders |
|--------------|-----------------|
| Require dedicated time | Quick actions |
| Complex, multi-step | Simple, single action |
| Work-related | Personal + work |
| Tracked in sprints | Time/location triggered |

Both appear under "Tasks & Reminders" but are grouped separately.

---

## Validation

| Check | Expected |
|-------|----------|
| Reminders retrieved | ✓ |
| Shopping retrieved | ✓ |
| Overdue highlighted | ✓ |
| Times shown correctly | ✓ |
| Create works | ✓ |
| Lists are separate | ✓ |

---

## Related Features

- **F05 (Morning Brief Core)**: Includes reminders in output
- **F05.5 (Linear)**: Co-located under "Tasks & Reminders"
- **F09 (Task Management)**: Reminder creation details
- **F10 (External Sources)**: Reminders configuration
