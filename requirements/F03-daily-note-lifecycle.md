# F3: Daily Note Lifecycle

## Overview

| Attribute | Value |
|-----------|-------|
| Feature ID | F3 |
| Priority | Phase 2 (Capture & Processing) |
| Dependencies | F1 (Vault Structure) |
| Dependents | F2 (Capture), F5 (Brief), F6 (Review) |

## Purpose

Manage daily notes from creation through archival. The daily note serves as the day's central document: containing the morning brief, accumulating captures, and recording the evening review.

---

## Requirements

| ID | Requirement | Priority |
|----|-------------|----------|
| F3.1 | Daily note filename: `YYYY-MM-DD dddd.md` | Must |
| F3.2 | Daily note lives in 0_Inbox while active | Must |
| F3.3 | Daily note archived when: day passed AND processed=true | Must |
| F3.4 | Archive path: `6_Archive/Daily-Notes/YYYY/MM/` | Must |
| F3.5 | Structure: Morning Brief → Captures → Evening Review | Must |
| F3.6 | Frontmatter tracks processing and review state | Must |
| F3.7 | Today's daily note created automatically if missing | Should |

---

## Filename Convention

```
YYYY-MM-DD dddd.md

Examples:
- 2025-01-31 Friday.md
- 2025-02-01 Saturday.md
- 2025-02-02 Sunday.md
```

The day name suffix aids quick identification when scanning the inbox.

---

## Daily Note Structure

```markdown
---
type: daily
date: 2025-01-31
processed: false
review_completed: false
created: 2025-01-31T07:00:00+01:00
updated: 2025-01-31T22:00:00+01:00
---

## Morning Brief
[Generated by Claude during /brief]

### Calendar
- 10:00 Weekly standup (Domain team)
- 14:00 1:1 with Manager

### Priorities
1. Respond to Legal on pricing
2. Review BI dashboard mockups

### Decisions Needed
- [ ] File slack-thread.md → Projects/domain-bundling?

---

## Captures

### 09:15
Quick thought about transfer pricing UX

### 11:42
[[slack-thread-legal-approval.md]]

### 14:30
[[voice-memo-2025-01-31-1430.md]]

---

## Evening Review
[Added during /review]

### Completed
- [x] Responded to Legal
- [x] Reviewed mockups

### Carried Forward
- [ ] Follow up with Jane on pricing

### Notes
Good progress on domain bundling. Need to block time tomorrow for deep work.
```

---

## Lifecycle States

```
┌─────────────────────────────────────────────────────────────┐
│                        CREATED                              │
│  Location: 0_Inbox/YYYY-MM-DD dddd.md                       │
│  State: processed=false, review_completed=false             │
└─────────────────────────┬───────────────────────────────────┘
                          │
                          ▼ (morning brief run)
┌─────────────────────────────────────────────────────────────┐
│                    BRIEF COMPLETED                          │
│  Morning Brief section populated                            │
│  State: processed=false, review_completed=false             │
└─────────────────────────┬───────────────────────────────────┘
                          │
                          ▼ (captures accumulate through day)
┌─────────────────────────────────────────────────────────────┐
│                        ACTIVE                               │
│  Captures section growing                                   │
│  State: processed=false, review_completed=false             │
└─────────────────────────┬───────────────────────────────────┘
                          │
                          ▼ (evening review run)
┌─────────────────────────────────────────────────────────────┐
│                   REVIEW COMPLETED                          │
│  Evening Review section populated                           │
│  State: processed=true, review_completed=true               │
└─────────────────────────┬───────────────────────────────────┘
                          │
                          ▼ (day passes + both flags true)
┌─────────────────────────────────────────────────────────────┐
│                       ARCHIVED                              │
│  Location: 6_Archive/Daily-Notes/YYYY/MM/YYYY-MM-DD dddd.md │
│  State: preserved                                           │
└─────────────────────────────────────────────────────────────┘
```

---

## Archival Rules

A daily note moves to archive when BOTH conditions are true:

1. **Day has passed** — The date in the filename is before today
2. **Processed** — The `processed` flag is `true`

This allows:
- Multiple inbox processing sessions per day
- Skipping days without losing unprocessed notes
- Flexibility in when reviews happen

### Archival Path

```
0_Inbox/2025-01-31 Friday.md
    ↓ (archive)
6_Archive/Daily-Notes/2025/01/2025-01-31 Friday.md
```

---

## Frontmatter Schema

```yaml
---
type: daily
date: 2025-01-31           # ISO date (for queries)
processed: false           # All inbox items addressed?
review_completed: false    # Evening review done?
created: timestamp         # When note was created
updated: timestamp         # Last modification
---
```

---

## Creation Logic

When is a daily note created?

| Trigger | Action |
|---------|--------|
| Morning brief requested | Create if missing |
| Capture arrives | Create if missing |
| User explicitly opens | Already exists or created |

### Template for New Daily Note

```markdown
---
type: daily
date: {{date}}
processed: false
review_completed: false
created: {{timestamp}}
updated: {{timestamp}}
---

## Morning Brief


---

## Captures


---

## Evening Review

```

---

## Edge Cases

### Multiple days unprocessed

If the user skips reviews, multiple daily notes may accumulate in 0_Inbox:

```
0_Inbox/
├── 2025-01-29 Wednesday.md   (processed: false)
├── 2025-01-30 Thursday.md    (processed: false)
└── 2025-01-31 Friday.md      (today)
```

During processing, Claude should:
1. Identify unprocessed past notes
2. Process oldest first, or batch process
3. Archive each as it's completed

### Review spans midnight

If evening review starts at 11:30 PM and finishes at 12:15 AM:
- Review content goes in the day being reviewed (original date)
- Archive happens based on original date
- New day's note is separate

---

## Validation

| Check | Expected |
|-------|----------|
| Filename matches YYYY-MM-DD dddd.md format | ✓ |
| Frontmatter contains all required fields | ✓ |
| Sections present in correct order | ✓ |
| Archival only happens when both conditions met | ✓ |
| Archive path follows YYYY/MM structure | ✓ |

---

## Related Features

- **F2 (Capture)**: Writes to daily note
- **F5 (Morning Brief)**: Populates first section
- **F6 (Evening Review)**: Populates last section, sets flags
- **F8 (Inbox Processing)**: Sets processed flag
